<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <!-- Include the CesiumJS JavaScript and CSS files -->
    <script src="https://cesium.com/downloads/cesiumjs/releases/1.119/Build/Cesium/Cesium.js"></script>
    <link href="https://cesium.com/downloads/cesiumjs/releases/1.119/Build/Cesium/Widgets/widgets.css" rel="stylesheet">
    <style>
        body,
        html,
        #cesiumContainer {
            width: 100%;
            height: 100%;
            overflow: hidden;
            margin: 0;
            padding: 0;
        }

        .cesium-viewer-animationContainer,
        .cesium-viewer-timelineContainer,
        .cesium-viewer-bottom,
        .cesium-viewer-fullscreenContainer,
        .cesium-viewer-toolbar {
            display: none !important;
        }
    </style>
    <title> GeoJSON Data Preview</title>
</head>

<body>
    <div id="cesiumContainer"></div>
    <script type="module">

        var viewer = new Cesium.Viewer('cesiumContainer', {
            terrainProviderViewModels: Cesium.createDefaultTerrainProviderViewModels(),
            selectedTerrainProviderViewModel: Cesium.createDefaultTerrainProviderViewModels()[0]
        });

        function loadGeoJson(url) {
            Cesium.GeoJsonDataSource.load(url).then(function (dataSource) {

                viewer.dataSources.add(dataSource);

                var entities = dataSource.entities.values;
                for (var i = 0; i < entities.length; i++) {
                    var entity = entities[i];

                    if (Cesium.defined(entity.polygon)) {
                        entity.polygon.material = Cesium.Color.WHITE.withAlpha(0.6);
                        entity.polygon.outline = true;
                        entity.polygon.outlineColor = Cesium.Color.BLACK;
                    }

                    if (Cesium.defined(entity.polyline)) {
                        entity.polyline.material = new Cesium.PolylineGlowMaterialProperty({
                            color: Cesium.Color.BLUE.withAlpha(0.7)
                        });
                        entity.polyline.width = 5;
                    }

                    if (Cesium.defined(entity.point)) {
                        entity.point.pixelSize = 10;
                        entity.point.color = Cesium.Color.YELLOW;
                    }
                }
            });
        }
        var directory = "./states";
        fs.readdir(directory, function (err, files) {
            if (err) {
                console.error("Error reading directory:", err);
                return;
            }

            files.forEach(function (file) {
                var filePath = directory + "/" + file;
                loadGeoJson(filePath);
            });
        });

    </script>
    </div>
</body>

</html>